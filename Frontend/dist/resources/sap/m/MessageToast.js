/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./InstanceManager","sap/ui/core/Popup","sap/ui/core/library","sap/ui/core/Control","sap/ui/Device","sap/base/Log","sap/ui/thirdparty/jquery"],function(e,t,i,o,n,a,jQuery){"use strict";var s=i.Dock;var r=i.CSSSize;var f={};var l="0 -64",u="sapMMessageToast",d="sapUiSelectable",p="sapContrast",c="sapContrastPlus";f._mSettings={duration:3e3,width:"15em",my:"center bottom",at:"center bottom",of:document.defaultView,offset:"0 0",collision:"fit fit",onClose:null,animationTimingFunction:"ease",animationDuration:1e3,autoClose:true,closeOnBrowserNavigation:true};f._aPopups=[];f._iOpenedPopups=0;f._bBoundedEvents=false;f._validateSettings=function(e){f._isFiniteInteger(e.duration);f._validateWidth(e.width);f._validateDockPosition(e.my);f._validateDockPosition(e.at);f._validateOf(e.of);f._validateOffset(e.offset);f._validateCollision(e.collision);f._validateOnClose(e.onClose);f._validateAutoClose(e.autoClose);f._validateAnimationTimingFunction(e.animationTimingFunction);f._isFiniteInteger(e.animationDuration)};f._isFiniteInteger=function(e){if(typeof e!=="number"||!isFinite(e)||!(Math.floor(e)===e)||e<=0){a.error('"iNumber" needs to be a finite positive nonzero integer on '+f+"._isFiniteInteger")}};f._validateWidth=function(e){if(!r.isValid(e)){a.error(e+" is not of type "+'"sap.ui.core.CSSSize" for property "width" on '+f+"._validateWidth")}};f._validateDockPosition=function(e){if(!s.isValid(e)){a.error('"'+e+'"'+" is not of type "+'"sap.ui.core.Popup.Dock" on '+f+"._validateDockPosition")}};f._validateOf=function(e){if(!(e instanceof jQuery)&&!(e&&e.nodeType===1)&&!(e instanceof o)&&e!==window){a.error('"of" needs to be an instance of sap.ui.core.Control or an Element or a jQuery object or the window on '+f+"._validateOf")}};f._validateOffset=function(e){if(typeof e!=="string"){a.error(e+" is of type "+typeof e+', expected "string" for property "offset" on '+f+"._validateOffset")}};f._validateCollision=function(e){var t=/^(fit|flip|none|flipfit|flipflip|flip flip|flip fit|fitflip|fitfit|fit fit|fit flip)$/i;if(!t.test(e)){a.error('"collision" needs to be a single value “fit”, “flip”, or “none”, or a pair for horizontal and vertical e.g. "fit flip”, "fit none", "flipfit" on '+f+"._validateOffset")}};f._validateOnClose=function(e){if(typeof e!=="function"&&e!==null){a.error('"onClose" should be a function or null on '+f+"._validateOnClose")}};f._validateAutoClose=function(e){if(typeof e!=="boolean"){a.error('"autoClose" should be a boolean on '+f+"._validateAutoClose")}};f._validateAnimationTimingFunction=function(e){var t=/^(ease|linear|ease-in|ease-out|ease-in-out)$/i;if(!t.test(e)){a.error('"animationTimingFunction" should be a string, expected values: '+"ease, linear, ease-in, ease-out, ease-in-out on "+f+"._validateAnimationTimingFunction")}};function v(e){for(var t=["my","at","of","offset"],i=0;i<t.length;i++){if(e[t[i]]!==undefined){return false}}return true}function _(e){var t=document.createElement("div");t.className=u+" "+d+" "+p+" "+c;if(sap.ui.getCore().getConfiguration().getAccessibility()){t.setAttribute("role","alert")}t.style.width=e.width;t.appendChild(document.createTextNode(e.message));return t}function m(e){if(e){if(v(e)){e.offset=l}if(e.of&&e.of.nodeType===9){e.of=document.defaultView}}else{e={offset:l}}return e}f._handleResizeEvent=function(){if(n.system.phone||n.system.tablet){f._resetPosition(f._aPopups)}setTimeout(f["_applyPositions"].bind(f,f._aPopups),0)};f._handleMouseDownEvent=function(e){var t=e.target.hasAttribute("class")&&e.target.getAttribute("class").indexOf(u)!==-1;if(t||e.isMarked("delayedMouseEvent")){return}f._aPopups.forEach(function(e){e&&e.__bAutoClose&&e.close()})};f._resetPosition=function(e){for(var t=0,i;t<e.length;t++){i=e[t]&&e[t].getContent();if(i){i.style.visibility="hidden";i.style.left=0}}};f._applyPositions=function(e){for(var t=0,i,o;t<e.length;t++){i=e[t];if(i){o=i._oPosition;if(n.system.phone||n.system.tablet){setTimeout(f["_applyPosition"].bind(f,i,o),0)}else{i.setPosition(o.my,o.at,o.of,o.offset)}}}};f._applyPosition=function(e,t){t=t||e._oPosition;var i=e.getContent();e.setPosition(t.my,t.at,t.of,t.offset);i.style.visibility="visible"};f._setCloseAnimation=function(e,t,i,o){var n="opacity "+o.animationTimingFunction+" "+o.animationDuration+"ms",a="webkitTransitionEnd."+u+" transitionend."+u;if(sap.ui.getCore().getConfiguration().getAnimation()&&o.animationDuration>0){e[0].style.webkitTransition=n;e[0].style.transition=n;e[0].style.opacity=0;e.on(a,function t(){e.off(a);i()})}else{i()}};f.show=function(i,o){var a=f,s=jQuery.extend({},f._mSettings,{message:i}),r=new t,l,d,p="mousedown."+u+" touchstart."+u,c,v;o=m(o);jQuery.extend(s,o);f._validateSettings(s);d=_(s);l=f._aPopups.push(r)-1;r.setContent(d);r.setPosition(s.my,s.at,s.of,s.offset,s.collision);r.setAnimations(function e(t,i,o){o()},function e(t,i,o){a._setCloseAnimation(t,i,o,s)});r.setShadow(false);r.__bAutoClose=s.autoClose;if(s.closeOnBrowserNavigation){e.addPopoverInstance(r)}if(!f._bBoundedEvents){jQuery(window).on("resize."+u,f._handleResizeEvent.bind(f));jQuery(document).on(p,f._handleMouseDownEvent.bind(f));f._bBoundedEvents=true}r.open();f._iOpenedPopups++;function g(){e.removePopoverInstance(a._aPopups[l]);jQuery(a._aPopups[l].getContent()).remove();a._aPopups[l].detachClosed(g);a._aPopups[l].destroy();a._aPopups[l]=null;a._iOpenedPopups--;if(a._iOpenedPopups===0){a._aPopups=[];jQuery(window).off("resize."+u);jQuery(document).off(p);a._bBoundedEvents=false}if(typeof s.onClose==="function"){s.onClose.call(a)}}r.attachClosed(g);c=setTimeout(r["close"].bind(r),s.duration);function y(){clearTimeout(c);c=null;function e(){v=setTimeout(r["close"].bind(r),s.duration);r.getContent().removeEventListener("mouseleave",e)}r.getContent().addEventListener("mouseleave",e);clearTimeout(v);v=null}r.getContent().addEventListener("touchstart",y);r.getContent().addEventListener("mouseover",y);if(n.system.desktop){r.getContent().addEventListener("mouseleave",function(){c=setTimeout(r["close"].bind(r),s.duration)})}};f.toString=function(){return"sap.m.MessageToast"};return f},true);
//# sourceMappingURL=MessageToast.js.map