{"version":3,"file":"_AggregationHelper.js","names":["sap","ui","define","_Helper","_Parser","Filter","mAggregationType","aggregate","grandTotal","max","min","name","subtotals","unit","with","grandTotalAtBottomOnly","group","additionally","groupLevels","subtotalsAtBottomOnly","rComma","rOrderbyItem","RegExp","sODataIdentifier","sWhitespace","_AggregationHelper","oAggregation","aGroupBy","aAggregate","bGrandTotalLike184","sAlias","i","aAliases","oDetails","sAggregate","sUnit","sWith","Error","push","indexOf","skipTop","mQueryOptions","aTransformations","$skip","$top","Infinity","join","buildApply","iLevel","bFollowUp","mAlias2MeasureAndMethod","sApply","aGrandTotalAggregate","bIsLeafLevel","sLeaves","aMinMaxAggregate","sSkipTop","aSubtotalsAggregate","processMinOrMax","sName","sMinOrMax","measure","method","Object","assign","checkTypeof","length","forEach","sGroup","keys","sort","filter","concat","bind","aAdditionally","apply","$count","$filter","$orderby","$$leaves","$$filterBeforeAggregate","$apply","vValue","vType","sPath","Array","isArray","vElement","bIsMap","sKey","createPlaceholder","iIndex","oParentCache","oPlaceholder","setPrivateAnnotation","extractSubtotals","oGroupNode","oCollapsed","oExpanded","filterOrderby","sFilteredOrderby","getFilteredOrderby","getAllProperties","aAggregates","aGroups","aAllProperties","sAdditionally","includes","split","sOrderby","bIsLeaf","isUnitForSubtotals","some","isUsedAtLeaf","isUsedFor","sOrderbyItem","aMatches","exec","getOrCreateExpandedObject","getPrivateAnnotation","undefined","hasGrandTotal","mAggregate","hasMinOrMax","isAffected","aFilters","aSideEffectPaths","affects","sSideEffectPath","sPropertyPath","endsWith","slice","hasPathPrefix","hasAffectedFilter","aFilters0","oFilter","fnAffects","removeUI5grand__","oGrandTotal","startsWith","setAnnotations","oElement","bIsExpanded","bIsTotal","vProperty","createMissing","splitFilter","aFiltersAfterAggregate","aFiltersBeforeAggregate","isAfter","bAnd","wrap"],"sources":["_AggregationHelper-dbg.js"],"mappings":"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","ignoreList":[]}