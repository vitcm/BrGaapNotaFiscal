/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/thirdparty/jquery","sap/base/Log","sap/base/assert","sap/base/util/extend"],function(jQuery,e,r,n){"use strict";var t={};var s={js:["controller","designtime","fragment","support","view"],json:["fragment","view"],html:["fragment","view"],xml:["fragment","view"]};var a=new RegExp("\\.("+Object.keys(s).join("|")+")$");t.getKnownSubtypes=function(){return s};t.getAllRequiredModules=function(){var e=[],r=sap.ui.loader._.getAllModules(true),n;for(var t in r){n=r[t];if(n.ui5&&n.state!==-1){e.push(n.ui5)}}return e};var i=Object.create(null);t.registerResourcePath=function(r,n){if(!n){n={url:null}}if(!i[r]){var t;if(typeof n==="string"||n instanceof String){t=n}else{t=n.url;if(n.final){i[r]=n.final}}var s=sap.ui.require.toUrl(r);var a;if(t!==s||n.final){a={paths:{}};a.paths[r]=t;sap.ui.loader.config(a);e.info("LoaderExtensions.registerResourcePath ('"+r+"', '"+t+"')"+(n["final"]?" (final)":""))}}else{e.warning("LoaderExtensions.registerResourcePath with prefix "+r+" already set as final. This call is ignored.")}};t.resolveUI5Url=function(e){if(e.startsWith("ui5:")){var r=e.replace("ui5:","");if(!r.startsWith("//")){throw new Error("URLs using the 'ui5' protocol must be absolute. Relative and server absolute URLs are reserved for future use.")}r=r.replace("//","");return sap.ui.loader._.resolveURL(sap.ui.require.toUrl(r))}else{return e}};t.loadResource=function(s,i){var o,u,l,f,c,d,p;if(t.notifyResourceLoading){d=t.notifyResourceLoading()}if(typeof s==="string"){i=i||{}}else{i=s||{};s=i.name}i=n({failOnError:true,async:false},i);o=i.dataType;if(o==null&&s){o=(o=a.exec(s||i.url))&&o[1]}r(/^(xml|html|json|text)$/.test(o),"type must be one of xml, html, json or text");c=i.async?new jQuery.Deferred:null;function g(r,n){if(r==null&&i.failOnError){f=n||new Error("no data returned for "+s);if(i.async){c.reject(f);e.error(f)}if(d){d()}return null}if(i.async){c.resolve(r)}if(d){d()}return r}function y(e){var r=jQuery.ajaxSettings.converters["text "+o];if(typeof r==="function"){e=r(e)}return g(e)}u=sap.ui.loader._.getModuleContent(s,i.url);if(u!=undefined){if(i.async){setTimeout(function(){y(u)},0)}else{u=y(u)}}else{p=sap.ui.loader._.getSyncCallBehavior();if(!i.async&&p){if(p>=1){e.error("[nosync] loading resource '"+(s||i.url)+"' with sync XHR")}else{throw new Error("[nosync] loading resource '"+(s||i.url)+"' with sync XHR")}}jQuery.ajax({url:l=i.url||sap.ui.loader._.getResourcePath(s),async:i.async,dataType:o,headers:i.headers,success:function(e,r,n){u=g(e)},error:function(e,r,n){f=new Error("resource "+s+" could not be loaded from "+l+". Check for 'file not found' or parse errors. Reason: "+n);f.status=r;f.error=n;f.statusCode=e.status;u=g(null,f)}})}if(i.async){return Promise.resolve(c)}if(f!=null&&i.failOnError){throw f}return u};t.notifyResourceLoading=null;return t});
//# sourceMappingURL=LoaderExtensions.js.map