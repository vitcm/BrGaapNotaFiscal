/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/Log","sap/ui/thirdparty/jquery"],function(e,jQuery){"use strict";var t={};var n="source";var r="target";var o="movedElements";var i="columns";var a="cells";var g="items";function d(t,o,d,s){var c=d.modifier,l=d.view,u=d.appComponent,f=t.getContent(),p=t.getDependentControl(n,d),v=t.getDependentControl(r,d),m=c.getAggregation(v,i),h=function(t,n,r){var o=c.getAggregation(t,a);if(!o){e.warning("Aggregation cells to move not found");return}if(n<0||n>=o.length){e.warning("Move cells in table item called with invalid index: "+n);return}var i=o[n];c.removeAggregation(t,a,i);c.insertAggregation(t,a,i,r,l)},C=function(e,t){c.getAggregation(v,g).forEach(function(n){if(c.getControlType(n)==="sap.m.GroupHeaderListItem"){return}h(n,e,t)})};if(p!==v){e.warning("Moving columns between different tables is not yet supported.");return false}f.movedElements.forEach(function(t){var n=c.bySelector(t.selector,u,l),r,o,a,d,f;if(!n){f=t.selector&&t.selector.id;e.warning("The table column with id: '"+f+"' stored in the change is not found and the move operation cannot be applied");return}a=m.indexOf(n);d=t.sourceIndex;o=typeof s==="function"&&s(d);o=jQuery.isNumeric(o)?o:t.targetIndex;if(a!==o){r=a}else{r=d}c.removeAggregation(v,i,n);c.insertAggregation(v,i,n,o,l);var p=c.getBindingTemplate(v,g);if(p){h(p,r,o);c.updateAggregation(v,g)}else{C(r,o)}},this);return true}t.applyChange=function(e,t,n){var r=[];d(e,t,n,function(e){r.unshift({index:e})});e.setRevertData(r)};t.revertChange=function(e,t,n){var r=e.getRevertData();d(e,t,n,function(){var e=r.shift();return e&&e.index});e.resetRevertData()};t.completeChangeContent=function(e,t,i){var a=i.modifier,g=i.appComponent,d=e.getDefinition(),s=a.bySelector(t.source.id,g),c=a.bySelector(t.target.id,g),l={aggregation:t.source.aggregation,type:a.getControlType(s)},u={aggregation:t.target.aggregation,type:a.getControlType(c)};d.content={movedElements:[]};t.movedElements.forEach(function(e){var t=e.element||a.bySelector(e.id,g);d.content.movedElements.push({selector:a.getSelector(t,g),sourceIndex:e.sourceIndex,targetIndex:e.targetIndex})});e.addDependentControl(t.source.id,n,i,l);e.addDependentControl(t.target.id,r,i,u);e.addDependentControl(t.movedElements.map(function(e){return e.id}),o,i)};return t},true);
//# sourceMappingURL=MoveTableColumns.js.map