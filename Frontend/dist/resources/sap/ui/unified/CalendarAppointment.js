/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./DateTypeRange","sap/ui/core/format/DateFormat","sap/ui/core/format/NumberFormat","sap/ui/core/LocaleData","./library","sap/base/Log"],function(e,t,a,i,n,r){"use strict";var o=e.extend("sap.ui.unified.CalendarAppointment",{metadata:{library:"sap.ui.unified",properties:{title:{type:"string",group:"Data"},text:{type:"string",group:"Data"},description:{type:"string",group:"Data"},icon:{type:"sap.ui.core.URI",group:"Data",defaultValue:null},tentative:{type:"boolean",group:"Data",defaultValue:false},selected:{type:"boolean",group:"Data",defaultValue:false},key:{type:"string",group:"Data",defaultValue:null},color:{type:"sap.ui.core.CSSColor",group:"Appearance",defaultValue:null}}}});o.prototype.init=function(){this._sAppointmentPartSuffix=null};o.prototype.applyFocusInfo=function(e){var t=this.getParent();if(t){t.applyFocusInfo(e)}return this};o.prototype._getDateRangeIntersectionText=function(e){var i=this.getStartDate(),n=this.getEndDate()?this.getEndDate():new Date(864e12),r,o,g=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0),u=new Date(g.getTime()+24*60*60*1e3),p=t.getTimeInstance({pattern:"HH:mm"}),s=sap.ui.getCore().getLibraryResourceBundle("sap.m"),m=a.getUnitInstance({allowedUnits:["duration-hour"]},sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale()),l=a.getUnitInstance({allowedUnits:["duration-minute"]},sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale()),f,d,c,T;if(i.getTime()>u.getTime()||n.getTime()<g.getTime()){r=""}else if(i.getTime()<g.getTime()&&n.getTime()>u.getTime()){r=s.getText("PLANNINGCALENDAR_ALLDAY")}else if(i.getTime()<g.getTime()){r=s.getText("PLANNINGCALENDAR_UNTIL");o=p.format(n)}else if(n.getTime()>u.getTime()){r=s.getText("PLANNINGCALENDAR_FROM");o=p.format(i)}else{r=p.format(i);if(n.getTime()-i.getTime()<36e5){d=(n.getTime()-i.getTime())/6e4;o=l.format(d,"duration-minute")}else if((n.getTime()-i.getTime())%36e5===0){f=(n.getTime()-i.getTime())/36e5;o=m.format(f,"duration-hour")}else{f=Math.floor((n.getTime()-i.getTime())/36e5);c=m.format(f,"duration-hour");d=(n.getTime()-i.getTime())/6e4%60;T=l.format(d,"duration-minute");o=s.getText("PLANNINGCALENDAR_APP_DURATION",[c,T])}}return{start:r,end:o}};o._getComparer=function(e){var t=24*60*60*1e3,a=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0).getTime(),i=a+t;return function(e,t){var n=e.appointment.getStartDate().getTime(),r=t.appointment.getStartDate().getTime(),o=e.appointment.getEndDate()?e.appointment.getEndDate().getTime():864e12,g=t.appointment.getEndDate()?t.appointment.getEndDate().getTime():864e12,u=n<=a&&o>=i,p=r<=a&&g>=i,s;if(u&&p||!u&&!p){s=n-r;if(s===0){s=g-o}}else if(u){s=-1}else{s=1}return s}};o.prototype.setColor=function(e){if(e&&!e.match(/^#[0-9a-f]{6}$/i)){r.warning("setColor accepts only full hex color value with pound symbol, but value is '"+e+"'")}return this.setProperty("color",e)};o.prototype._getCSSColorForBackground=function(e){return"rgba("+[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)].join(",")+", 0.2)"};o.prototype._setAppointmentPartSuffix=function(e){this._sAppointmentPartSuffix=e;return this};o.prototype.getDomRef=function(e){if(document.getElementById(this.getId())){return document.getElementById(e?this.getId()+"-"+e:this.getId())}else if(this._sAppointmentPartSuffix){return document.getElementById(e?this.getId()+"-"+this._sAppointmentPartSuffix+"-"+e:this.getId()+"-"+this._sAppointmentPartSuffix)}var t=document.querySelectorAll(".sapUiCalendarRowApps[id^="+this.getId()+"]");return t.length>0?t[0]:null};return o});
//# sourceMappingURL=CalendarAppointment.js.map